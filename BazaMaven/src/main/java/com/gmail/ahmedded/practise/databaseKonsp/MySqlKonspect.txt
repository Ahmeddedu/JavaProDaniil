-- =====================================================================
--  üìò –ö–û–ù–°–ü–ï–ö–¢ –ü–û –û–°–ù–û–í–ù–´–ú –ö–û–ú–ê–ù–î–ê–ú MySQL
--  –í—Å—ë –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä—è–º–æ –≤ MySQL –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ DBeaver.
--  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å --
-- =====================================================================


-- =====================================================
-- üîπ 1. –°–û–ó–î–ê–ù–ò–ï –ò –£–î–ê–õ–ï–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•
-- =====================================================

-- –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE my_database;

-- –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
CREATE DATABASE IF NOT EXISTS my_database;

-- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
USE my_database;

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–∑
SHOW DATABASES;

-- –£–¥–∞–ª–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
DROP DATABASE my_database;



-- =====================================================
-- üîπ 2. –°–û–ó–î–ê–ù–ò–ï –ò –†–ê–ë–û–¢–ê –° –¢–ê–ë–õ–ò–¶–ê–ú–ò
-- =====================================================

-- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É users
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,  -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    name VARCHAR(50) NOT NULL,          -- –ò–º—è
    age INT,                            -- –í–æ–∑—Ä–∞—Å—Ç
    number VARCHAR(20),                 -- –¢–µ–ª–µ—Ñ–æ–Ω
    role VARCHAR(20) DEFAULT 'user'     -- –†–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é user)
);

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ
SHOW TABLES;

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
DESCRIBE users;

-- –£–¥–∞–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
DROP TABLE users;

-- –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É (—É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å–±—Ä–æ—Å–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ ID)
TRUNCATE TABLE users;

-- –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –±–µ–∑ —Å–±—Ä–æ—Å–∞ —Å—á—ë—Ç—á–∏–∫–∞
DELETE FROM users;



-- =====================================================
-- üîπ 3. –î–û–ë–ê–í–õ–ï–ù–ò–ï, –û–ë–ù–û–í–õ–ï–ù–ò–ï, –£–î–ê–õ–ï–ù–ò–ï –î–ê–ù–ù–´–•
-- =====================================================

-- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
INSERT INTO users (name, age, number, role)
VALUES ('–î–∞–Ω–∏–ª', 25, '+380991112233', 'admin');

-- –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π —Å—Ä–∞–∑—É
INSERT INTO users (name, age, number, role)
VALUES
('–ê–Ω–Ω–∞', 22, '+380671234567', 'user'),
('–ò–≤–∞–Ω', 30, '+380501234567', 'moderator');

-- –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–º–µ–Ω—è–µ–º —Ä–æ–ª—å —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ ID)
UPDATE users
SET role = 'superadmin'
WHERE id = 1;

-- –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º ID
DELETE FROM users
WHERE id = 2;



-- =====================================================
-- üîπ 4. –í–´–ë–û–†–ö–ê –î–ê–ù–ù–´–• (SELECT)
-- =====================================================

-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
SELECT * FROM users;

-- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∞ –∏ –≤–æ–∑—Ä–∞—Å—Ç
SELECT name, age FROM users;

-- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ–∑—Ä–∞—Å—Ç –±–æ–ª—å—à–µ 25
SELECT * FROM users WHERE age > 25;

-- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é 'user'
SELECT * FROM users WHERE role = 'user';

-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É)
SELECT * FROM users ORDER BY age DESC;

-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫
SELECT * FROM users LIMIT 3;

-- –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞ (LIKE)
SELECT * FROM users WHERE name LIKE '–ê%';  -- –í—Å–µ, –∫—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ –ê

-- –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫
SELECT COUNT(*) FROM users;

-- –ú–∞–∫—Å–∏–º—É–º, –º–∏–Ω–∏–º—É–º, —Å—Ä–µ–¥–Ω–µ–µ
SELECT MAX(age), MIN(age), AVG(age) FROM users;



-- =====================================================
-- üîπ 5. –ò–ó–ú–ï–ù–ï–ù–ò–ï –°–¢–†–£–ö–¢–£–†–´ –¢–ê–ë–õ–ò–¶–´ (ALTER)
-- =====================================================

-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ
ALTER TABLE users ADD COLUMN email VARCHAR(100);

-- –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø –ø–æ–ª—è
ALTER TABLE users MODIFY COLUMN number VARCHAR(30);

-- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª–µ
ALTER TABLE users CHANGE COLUMN name full_name VARCHAR(60);

-- –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ
ALTER TABLE users DROP COLUMN email;

-- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
RENAME TABLE users TO app_users;

-- –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä–æ–µ –∏–º—è
RENAME TABLE app_users TO users;



-- =====================================================
-- üîπ 6. –ö–õ–Æ–ß–ò, –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø –ò –°–í–Ø–ó–ò
-- =====================================================

-- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É posts, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å users
CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    title VARCHAR(100),
    text TEXT,
    FOREIGN KEY (user_id) REFERENCES users(id)  -- —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π users
);

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
SHOW CREATE TABLE posts;



-- =====================================================
-- üîπ 7. –ì–†–£–ü–ü–ò–†–û–í–ö–ê (GROUP BY)
-- =====================================================

-- –ü–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏
SELECT role, COUNT(*) AS count FROM users GROUP BY role;

-- –ü–æ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç –ø–æ —Ä–æ–ª–∏
SELECT role, AVG(age) AS avg_age FROM users GROUP BY role;



-- =====================================================
-- üîπ 8. –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô MySQL –ò –ü–†–ê–í
-- =====================================================

-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è MySQL
CREATE USER 'test_user'@'localhost' IDENTIFIED BY 'password123';

-- –î–∞—Ç—å –µ–º—É –≤—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –±–∞–∑—É my_database
GRANT ALL PRIVILEGES ON my_database.* TO 'test_user'@'localhost';

-- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏
FLUSH PRIVILEGES;



-- =====================================================
-- üîπ 9. –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´
-- =====================================================

-- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –±–∞–∑—É
SELECT DATABASE();

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é —Å–µ—Ä–≤–µ—Ä–∞
SELECT VERSION();

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT USER();

-- –í—ã—Ö–æ–¥ –∏–∑ MySQL
-- (–≤ –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏)
-- EXIT;



-- =====================================================
-- üîπ 10. –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –ü–†–ò–ú–ï–† –ü–†–û–ì–†–ê–ú–ú–ö–ò
-- =====================================================

-- –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é: —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã, —Ç–∞–±–ª–∏—Ü—ã, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –≤—ã–±–æ—Ä–∫–∞
-- –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ü–µ–ª–∏–∫–æ–º –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å

CREATE DATABASE IF NOT EXISTS demo_app;
USE demo_app;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT,
    number VARCHAR(20),
    role VARCHAR(20) DEFAULT 'user'
);

INSERT INTO users (name, age, number, role) VALUES
('–î–∞–Ω–∏–ª', 25, '+380991112233', 'admin'),
('–ê–Ω–Ω–∞', 22, '+380671234567', 'user'),
('–ò–≤–∞–Ω', 30, '+380501234567', 'moderator'),
('–ú–∞—Ä–∏—è', 19, '+380991234567', 'user');

-- –í—ã–≤–æ–¥–∏–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT * FROM users;

-- –ò–∑–º–µ–Ω—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç —É –ê–Ω–Ω—ã
UPDATE users SET age = 23 WHERE name = '–ê–Ω–Ω–∞';

-- –£–¥–∞–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é moderator
DELETE FROM users WHERE role = 'moderator';

-- –°—á–∏—Ç–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT COUNT(*) AS total_users FROM users;

-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–≤
SELECT * FROM users WHERE role = 'admin';

-- –í—Å—ë, –≥–æ—Ç–æ–≤–æ üôÇ
